(function(e,i){if(typeof define==="function"&&define.amd){define(i)}else if(typeof exports==="object"){module.exports=i()}else{e.PhotoSwipe=i()}})(this,function(){"use strict";var e=function(d,o,e,i){var h={features:null,bind:function(e,i,t,n){var o=(n?"remove":"add")+"EventListener";i=i.split(" ");for(var r=0;r<i.length;r++){if(i[r]){e[o](i[r],t,false)}}},isArray:function(e){return e instanceof Array},createEl:function(e,i){var t=document.createElement(i||"div");if(e){t.className=e}return t},getScrollY:function(){var e=window.pageYOffset;return e!==undefined?e:document.documentElement.scrollTop},unbind:function(e,i,t){h.bind(e,i,t,true)},removeClass:function(e,i){var t=new RegExp("(\\s|^)"+i+"(\\s|$)");e.className=e.className.replace(t," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,i){if(!h.hasClass(e,i)){e.className+=(e.className?" ":"")+i}},hasClass:function(e,i){return e.className&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(e.className)},getChildByClass:function(e,i){var t=e.firstChild;while(t){if(h.hasClass(t,i)){return t}t=t.nextSibling}},arraySearch:function(e,i,t){var n=e.length;while(n--){if(e[n][t]===i){return n}}return-1},extend:function(e,i,t){for(var n in i){if(i.hasOwnProperty(n)){if(t&&e.hasOwnProperty(n)){continue}e[n]=i[n]}}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(h.features){return h.features}var u=h.createEl(),c=u.style,e="",i={};i.oldIE=document.all&&!document.addEventListener;i.touch="ontouchstart"in window;if(window.requestAnimationFrame){i.raf=window.requestAnimationFrame;i.caf=window.cancelAnimationFrame}i.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled;if(!i.pointerEvent){var t=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var n=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(n&&n.length>0){n=parseInt(n[1],10);if(n>=1&&n<8){i.isOldIOSPhone=true}}}var o=t.match(/Android\s([0-9\.]*)/);var r=o?o[1]:0;r=parseFloat(r);if(r>=1){if(r<4.4){i.isOldAndroid=true}i.androidVersion=r}i.isMobileOpera=/opera mini|opera mobi/i.test(t)}var d=["transform","perspective","animationName"],p=["","webkit","Moz","ms","O"],a,l;for(var s=0;s<4;s++){e=p[s];for(var f=0;f<3;f++){a=d[f];l=e+(e?a.charAt(0).toUpperCase()+a.slice(1):a);if(!i[a]&&l in c){i[a]=l}}if(e&&!i.raf){e=e.toLowerCase();i.raf=window[e+"RequestAnimationFrame"];if(i.raf){i.caf=window[e+"CancelAnimationFrame"]||window[e+"CancelRequestAnimationFrame"]}}}if(!i.raf){var m=0;i.raf=function(e){var i=(new Date).getTime();var t=Math.max(0,16-(i-m));var n=window.setTimeout(function(){e(i+t)},t);m=i+t;return n};i.caf=function(e){clearTimeout(e)}}i.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;h.features=i;return i}};h.detectFeatures();if(h.features.oldIE){h.bind=function(e,i,t,n){i=i.split(" ");var o=(n?"detach":"attach")+"Event",r,a=function(){t.handleEvent.call(t)};for(var l=0;l<i.length;l++){r=i[l];if(r){if(typeof t==="object"&&t.handleEvent){if(!n){t["oldIE"+r]=a}else{if(!t["oldIE"+r]){return false}}e[o]("on"+r,t["oldIE"+r])}else{e[o]("on"+r,t)}}}}}var p=this;var t=25,a=3;var m={allowPanToNext:true,spacing:.12,bgOpacity:1,mouseUsed:false,loop:true,pinchToClose:true,closeOnScroll:true,closeOnVerticalDrag:true,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:false,focus:true,escKey:true,arrowKeys:true,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return e.tagName==="A"},getDoubleTapZoom:function(e,i){if(e){return 1}else{return i.initialZoomLevel<.7?1:1.33}},maxSpreadZoom:1.33,modal:true,scaleMode:"fit"};h.extend(m,i);var n=function(){return{x:0,y:0}};var s,r,b,v,l,f,u=n(),I=n(),y=n(),C,D,T,M={},x,S,A,E,O,k,R=0,Z={},P=n(),F,L,z=0,_,N,U,H,Y,W,B=true,G,X=[],V,K,q,$,j,J,g,Q={},ee=false,ie,te=function(e,i){h.extend(p,i.publicMethods);X.push(e)},ne=function(e){var i=ot();if(e>i-1){return e-i}else if(e<0){return i+e}return e},oe={},re=function(e,i){if(!oe[e]){oe[e]=[]}return oe[e].push(i)},w=function(e){var i=oe[e];if(i){var t=Array.prototype.slice.call(arguments);t.shift();for(var n=0;n<i.length;n++){i[n].apply(p,t)}}},ae=function(){return(new Date).getTime()},le=function(e){gi=e;p.bg.style.opacity=e*m.bgOpacity},se=function(e,i,t,n,o){if(!ee||o&&o!==p.currItem){n=n/(o?o.fitRatio:p.currItem.fitRatio)}e[Y]=A+i+"px, "+t+"px"+E+" scale("+n+")"},fe=function(e){if(di){if(e){if(x>p.currItem.fitRatio){if(!ee){dt(p.currItem,false,true);ee=true}}else{if(ee){dt(p.currItem);ee=false}}}se(di,y.x,y.y,x)}},ue=function(e){if(e.container){se(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)}},ce=function(e,i){i[Y]=A+e+"px, 0px"+E},de=function(e,i){if(!m.loop&&i){var t=v+(P.x*R-e)/P.x,n=Math.round(e-ci.x);if(t<0&&n>0||t>=ot()-1&&n<0){e=ci.x+n*m.mainScrollEndFriction}}ci.x=e;ce(e,l)},pe=function(e,i){var t=mi[e]-Z[e];return I[e]+u[e]+t-t*(i/S)},me=function(e,i){e.x=i.x;e.y=i.y;if(i.id){e.id=i.id}},he=function(e){e.x=Math.round(e.x);e.y=Math.round(e.y)},ve=null,ye=function(){if(ve){h.unbind(document,"mousemove",ye);h.addClass(d,"pswp--has_mouse");m.mouseUsed=true;w("mouseUsed")}ve=setTimeout(function(){ve=null},100)},xe=function(){h.bind(document,"keydown",p);if(g.transform){h.bind(p.scrollWrap,"click",p)}if(!m.mouseUsed){h.bind(document,"mousemove",ye)}h.bind(window,"resize scroll orientationchange",p);w("bindEvents")},ge=function(){h.unbind(window,"resize scroll orientationchange",p);h.unbind(window,"scroll",T.scroll);h.unbind(document,"keydown",p);h.unbind(document,"mousemove",ye);if(g.transform){h.unbind(p.scrollWrap,"click",p)}if(ii){h.unbind(window,C,p)}clearTimeout(ie);w("unbindEvents")},we=function(e,i){var t=st(p.currItem,M,e);if(i){c=t}return t},be=function(e){if(!e){e=p.currItem}return e.initialZoomLevel},Ie=function(e){if(!e){e=p.currItem}return e.w>0?m.maxSpreadZoom:1},Ce=function(e,i,t,n){if(n===p.currItem.initialZoomLevel){t[e]=p.currItem.initialPosition[e];return true}else{t[e]=pe(e,n);if(t[e]>i.min[e]){t[e]=i.min[e];return true}else if(t[e]<i.max[e]){t[e]=i.max[e];return true}}return false},De=function(){if(Y){var e=g.perspective&&!G;A="translate"+(e?"3d(":"(");E=g.perspective?", 0px)":")";return}Y="left";h.addClass(d,"pswp--ie");ce=function(e,i){i.left=e+"px"};ue=function(e){var i=e.fitRatio>1?1:e.fitRatio,t=e.container.style,n=i*e.w,o=i*e.h;t.width=n+"px";t.height=o+"px";t.left=e.initialPosition.x+"px";t.top=e.initialPosition.y+"px"};fe=function(){if(di){var e=di,i=p.currItem,t=i.fitRatio>1?1:i.fitRatio,n=t*i.w,o=t*i.h;e.width=n+"px";e.height=o+"px";e.left=y.x+"px";e.top=y.y+"px"}}},Te=function(e){var i="";if(m.escKey&&e.keyCode===27){i="close"}else if(m.arrowKeys){if(e.keyCode===37){i="prev"}else if(e.keyCode===39){i="next"}}if(i){if(!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}p[i]()}}},Me=function(e){if(!e){return}if(oi||ni||pi||$e){e.preventDefault();e.stopPropagation()}},Se=function(){p.setScrollOffset(0,h.getScrollY())};var Ae={},Ee=0,Oe=function(e){if(Ae[e]){if(Ae[e].raf){K(Ae[e].raf)}Ee--;delete Ae[e]}},ke=function(e){if(Ae[e]){Oe(e)}if(!Ae[e]){Ee++;Ae[e]={}}},Re=function(){for(var e in Ae){if(Ae.hasOwnProperty(e)){Oe(e)}}},Ze=function(e,i,t,n,o,r,a){var l=ae(),s;ke(e);var f=function(){if(Ae[e]){s=ae()-l;if(s>=n){Oe(e);r(t);if(a){a()}return}r((t-i)*o(s/n)+i);Ae[e].raf=V(f)}};f()};var Pe={shout:w,listen:re,viewportSize:M,options:m,isMainScrollAnimating:function(){return pi},getZoomLevel:function(){return x},getCurrentIndex:function(){return v},isDragging:function(){return ii},isZooming:function(){return si},setScrollOffset:function(e,i){Z.x=e;J=Z.y=i;w("updateScrollOffset",Z)},applyZoomPan:function(e,i,t,n){y.x=i;y.y=t;x=e;fe(n)},init:function(){if(s||r){return}var e;p.framework=h;p.template=d;p.bg=h.getChildByClass(d,"pswp__bg");q=d.className;s=true;g=h.detectFeatures();V=g.raf;K=g.caf;Y=g.transform;j=g.oldIE;p.scrollWrap=h.getChildByClass(d,"pswp__scroll-wrap");p.container=h.getChildByClass(p.scrollWrap,"pswp__container");l=p.container.style;p.itemHolders=F=[{el:p.container.children[0],wrap:0,index:-1},{el:p.container.children[1],wrap:0,index:-1},{el:p.container.children[2],wrap:0,index:-1}];F[0].el.style.display=F[2].el.style.display="none";De();T={resize:p.updateSize,orientationchange:function(){clearTimeout(ie);ie=setTimeout(function(){if(M.x!==p.scrollWrap.clientWidth){p.updateSize()}},500)},scroll:Se,keydown:Te,click:Me};var i=g.isOldIOSPhone||g.isOldAndroid||g.isMobileOpera;if(!g.animationName||!g.transform||i){m.showAnimationDuration=m.hideAnimationDuration=0}for(e=0;e<X.length;e++){p["init"+X[e]]()}if(o){var t=p.ui=new o(p,h);t.init()}w("firstUpdate");v=v||m.index||0;if(isNaN(v)||v<0||v>=ot()){v=0}p.currItem=nt(v);if(g.isOldIOSPhone||g.isOldAndroid){B=false}d.setAttribute("aria-hidden","false");if(m.modal){if(!B){d.style.position="absolute";d.style.top=h.getScrollY()+"px"}else{d.style.position="fixed"}}if(J===undefined){w("initialLayout");J=$=h.getScrollY()}var n="pswp--open ";if(m.mainClass){n+=m.mainClass+" "}if(m.showHideOpacity){n+="pswp--animate_opacity "}n+=G?"pswp--touch":"pswp--notouch";n+=g.animationName?" pswp--css_animation":"";n+=g.svg?" pswp--svg":"";h.addClass(d,n);p.updateSize();f=-1;z=null;for(e=0;e<a;e++){ce((e+f)*P.x,F[e].el.style)}if(!j){h.bind(p.scrollWrap,D,p)}re("initialZoomInEnd",function(){p.setContent(F[0],v-1);p.setContent(F[2],v+1);F[0].el.style.display=F[2].el.style.display="block";if(m.focus){d.focus()}xe()});p.setContent(F[1],v);p.updateCurrItem();w("afterInit");if(!B){O=setInterval(function(){if(!Ee&&!ii&&!si&&x===p.currItem.initialZoomLevel){p.updateSize()}},1e3)}h.addClass(d,"pswp--visible")},close:function(){if(!s){return}s=false;r=true;w("close");ge();$i(p.currItem,null,true,p.destroy)},destroy:function(){w("destroy");if(qi){clearTimeout(qi)}d.setAttribute("aria-hidden","true");d.className=q;if(O){clearInterval(O)}h.unbind(p.scrollWrap,D,p);h.unbind(window,"scroll",p);Di();Re();oe=null},panTo:function(e,i,t){if(!t){if(e>c.min.x){e=c.min.x}else if(e<c.max.x){e=c.max.x}if(i>c.min.y){i=c.min.y}else if(i<c.max.y){i=c.max.y}}y.x=e;y.y=i;fe()},handleEvent:function(e){e=e||window.event;if(T[e.type]){T[e.type](e)}},goTo:function(e){e=ne(e);var i=e-v;z=i;v=e;p.currItem=nt(v);R-=i;de(P.x*R);Re();pi=false;p.updateCurrItem()},next:function(){p.goTo(v+1)},prev:function(){p.goTo(v-1)},updateCurrZoomItem:function(e){if(e){w("beforeChange",0)}if(F[1].el.children.length){var i=F[1].el.children[0];if(h.hasClass(i,"pswp__zoom-wrap")){di=i.style}else{di=null}}else{di=null}c=p.currItem.bounds;S=x=p.currItem.initialZoomLevel;y.x=c.center.x;y.y=c.center.y;if(e){w("afterChange")}},invalidateCurrItems:function(){k=true;for(var e=0;e<a;e++){if(F[e].item){F[e].item.needsUpdate=true}}},updateCurrItem:function(e){if(z===0){return}var i=Math.abs(z),t;if(e&&i<2){return}p.currItem=nt(v);ee=false;w("beforeChange",z);if(i>=a){f+=z+(z>0?-a:a);i=a}for(var n=0;n<i;n++){if(z>0){t=F.shift();F[a-1]=t;f++;ce((f+2)*P.x,t.el.style);p.setContent(t,v-i+n+1+1)}else{t=F.pop();F.unshift(t);f--;ce(f*P.x,t.el.style);p.setContent(t,v+i-n-1-1)}}if(di&&Math.abs(z)===1){var o=nt(L);if(o.initialZoomLevel!==x){st(o,M);dt(o);ue(o)}}z=0;p.updateCurrZoomItem();L=v;w("afterChange")},updateSize:function(e){if(!B&&m.modal){var i=h.getScrollY();if(J!==i){d.style.top=i+"px";J=i}if(!e&&Q.x===window.innerWidth&&Q.y===window.innerHeight){return}Q.x=window.innerWidth;Q.y=window.innerHeight;d.style.height=Q.y+"px"}M.x=p.scrollWrap.clientWidth;M.y=p.scrollWrap.clientHeight;Se();P.x=M.x+Math.round(M.x*m.spacing);P.y=M.y;de(P.x*R);w("beforeResize");if(f!==undefined){var t,n,o;for(var r=0;r<a;r++){t=F[r];ce((r+f)*P.x,t.el.style);o=v+r-1;if(m.loop&&ot()>2){o=ne(o)}n=nt(o);if(n&&(k||n.needsUpdate||!n.bounds)){p.cleanSlide(n);p.setContent(t,o);if(r===1){p.currItem=n;p.updateCurrZoomItem(true)}n.needsUpdate=false}else if(t.index===-1&&o>=0){p.setContent(t,o)}if(n&&n.container){st(n,M);dt(n);ue(n)}}k=false}S=x=p.currItem.initialZoomLevel;c=p.currItem.bounds;if(c){y.x=c.center.x;y.y=c.center.y;fe(true)}w("resize")},zoomTo:function(i,e,t,n,o){if(e){S=x;mi.x=Math.abs(e.x)-y.x;mi.y=Math.abs(e.y)-y.y;me(I,y)}var r=we(i,false),a={};Ce("x",r,a,i);Ce("y",r,a,i);var l=x;var s={x:y.x,y:y.y};he(a);var f=function(e){if(e===1){x=i;y.x=a.x;y.y=a.y}else{x=(i-l)*e+l;y.x=(a.x-s.x)*e+s.x;y.y=(a.y-s.y)*e+s.y}if(o){o(e)}fe(e===1)};if(t){Ze("customZoomTo",0,1,t,n||h.easing.sine.inOut,f)}else{f(1)}}};var Fe=30,Le=10;var ze,_e,Ne={},Ue={},He={},Ye={},We={},Be=[],Ge={},Xe,Ve=[],Ke={},qe,$e,je,Je=0,Qe=n(),ei=0,ii,ti,ni,oi,ri,ai,li,si,fi,ui,c,ci=n(),di,pi,mi=n(),hi=n(),vi,yi,xi,gi,wi,bi=function(e,i){return e.x===i.x&&e.y===i.y},Ii=function(e,i){return Math.abs(e.x-i.x)<t&&Math.abs(e.y-i.y)<t},Ci=function(e,i){Ke.x=Math.abs(e.x-i.x);Ke.y=Math.abs(e.y-i.y);return Math.sqrt(Ke.x*Ke.x+Ke.y*Ke.y)},Di=function(){if(ri){K(ri);ri=null}},Ti=function(){if(ii){ri=V(Ti);Yi()}},Mi=function(){return!(m.scaleMode==="fit"&&x===p.currItem.initialZoomLevel)},Si=function(e,i){if(!e||e===document){return false}if(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1){return false}if(i(e)){return e}return Si(e.parentNode,i)},Ai={},Ei=function(e,i){Ai.prevent=!Si(e.target,m.isClickableElement);w("preventDragEvent",e,i,Ai);return Ai.prevent},Oi=function(e,i){i.x=e.pageX;i.y=e.pageY;i.id=e.identifier;return i},ki=function(e,i,t){t.x=(e.x+i.x)*.5;t.y=(e.y+i.y)*.5},Ri=function(e,i,t){if(e-_e>50){var n=Ve.length>2?Ve.shift():{};n.x=i;n.y=t;Ve.push(n);_e=e}},Zi=function(){var e=y.y-p.currItem.initialPosition.y;return 1-Math.abs(e/(M.y/2))},Pi={},Fi={},Li=[],zi,_i=function(e){while(Li.length>0){Li.pop()}if(!W){if(e.type.indexOf("touch")>-1){if(e.touches&&e.touches.length>0){Li[0]=Oi(e.touches[0],Pi);if(e.touches.length>1){Li[1]=Oi(e.touches[1],Fi)}}}else{Pi.x=e.pageX;Pi.y=e.pageY;Pi.id="";Li[0]=Pi}}else{zi=0;Be.forEach(function(e){if(zi===0){Li[0]=e}else if(zi===1){Li[1]=e}zi++})}return Li},Ni=function(e,i){var t,n=0,o=y[e]+i[e],r,u=i[e]>0,a=ci.x+i.x,l=ci.x-Ge.x,s,f;if(o>c.min[e]||o<c.max[e]){t=m.panEndFriction}else{t=1}o=y[e]+i[e]*t;if(m.allowPanToNext||x===p.currItem.initialZoomLevel){if(!di){f=a}else if(vi==="h"&&e==="x"&&!ni){if(u){if(o>c.min[e]){t=m.panEndFriction;n=c.min[e]-o;r=c.min[e]-I[e]}if((r<=0||l<0)&&ot()>1){f=a;if(l<0&&a>Ge.x){f=Ge.x}}else{if(c.min.x!==c.max.x){s=o}}}else{if(o<c.max[e]){t=m.panEndFriction;n=o-c.max[e];r=I[e]-c.max[e]}if((r<=0||l>0)&&ot()>1){f=a;if(l>0&&a<Ge.x){f=Ge.x}}else{if(c.min.x!==c.max.x){s=o}}}}if(e==="x"){if(f!==undefined){de(f,true);if(f===Ge.x){ai=false}else{ai=true}}if(c.min.x!==c.max.x){if(s!==undefined){y.x=s}else if(!ai){y.x+=i.x*t}}return f!==undefined}}if(!pi){if(!ai){if(x>p.currItem.fitRatio){y[e]+=i[e]*t}}}},Ui=function(e){if(e.type==="mousedown"&&e.button>0){return}if(it){e.preventDefault();return}if(je&&e.type==="mousedown"){return}if(Ei(e,true)){e.preventDefault()}w("pointerDown");if(W){var i=h.arraySearch(Be,e.pointerId,"id");if(i<0){i=Be.length}Be[i]={x:e.pageX,y:e.pageY,id:e.pointerId}}var t=_i(e),n=t.length;li=null;Re();if(!ii||n===1){ii=yi=true;h.bind(window,C,p);qe=wi=xi=$e=ai=oi=ti=ni=false;vi=null;w("firstTouchStart",t);me(I,y);u.x=u.y=0;me(Ye,t[0]);me(We,Ye);Ge.x=P.x*R;Ve=[{x:Ye.x,y:Ye.y}];_e=ze=ae();we(x,true);Di();Ti()}if(!si&&n>1&&!pi&&!ai){S=x;ni=false;si=ti=true;u.y=u.x=0;me(I,y);me(Ne,t[0]);me(Ue,t[1]);ki(Ne,Ue,hi);mi.x=Math.abs(hi.x)-y.x;mi.y=Math.abs(hi.y)-y.y;fi=ui=Ci(Ne,Ue)}},Hi=function(e){e.preventDefault();if(W){var i=h.arraySearch(Be,e.pointerId,"id");if(i>-1){var t=Be[i];t.x=e.pageX;t.y=e.pageY}}if(ii){var n=_i(e);if(!vi&&!oi&&!si){if(ci.x!==P.x*R){vi="h"}else{var o=Math.abs(n[0].x-Ye.x)-Math.abs(n[0].y-Ye.y);if(Math.abs(o)>=Le){vi=o>0?"h":"v";li=n}}}else{li=n}}},Yi=function(){if(!li){return}var e=li.length;if(e===0){return}me(Ne,li[0]);He.x=Ne.x-Ye.x;He.y=Ne.y-Ye.y;if(si&&e>1){Ye.x=Ne.x;Ye.y=Ne.y;if(!He.x&&!He.y&&bi(li[1],Ue)){return}me(Ue,li[1]);if(!ni){ni=true;w("zoomGestureStarted")}var i=Ci(Ne,Ue);var t=Vi(i);if(t>p.currItem.initialZoomLevel+p.currItem.initialZoomLevel/15){wi=true}var n=1,o=be(),r=Ie();if(t<o){if(m.pinchToClose&&!wi&&S<=p.currItem.initialZoomLevel){var a=o-t;var l=1-a/(o/1.2);le(l);w("onPinchClose",l);xi=true}else{n=(o-t)/o;if(n>1){n=1}t=o-n*(o/3)}}else if(t>r){n=(t-r)/(o*6);if(n>1){n=1}t=r+n*o}if(n<0){n=0}fi=i;ki(Ne,Ue,Qe);u.x+=Qe.x-hi.x;u.y+=Qe.y-hi.y;me(hi,Qe);y.x=pe("x",t);y.y=pe("y",t);qe=t>x;x=t;fe()}else{if(!vi){return}if(yi){yi=false;if(Math.abs(He.x)>=Le){He.x-=li[0].x-We.x}if(Math.abs(He.y)>=Le){He.y-=li[0].y-We.y}}Ye.x=Ne.x;Ye.y=Ne.y;if(He.x===0&&He.y===0){return}if(vi==="v"&&m.closeOnVerticalDrag){if(!Mi()){u.y+=He.y;y.y+=He.y;var s=Zi();$e=true;w("onVerticalDrag",s);le(s);fe();return}}Ri(ae(),Ne.x,Ne.y);oi=true;c=p.currItem.bounds;var f=Ni("x",He);if(!f){Ni("y",He);he(y);fe()}}},Wi=function(e){if(g.isOldAndroid){if(je&&e.type==="mouseup"){return}if(e.type.indexOf("touch")>-1){clearTimeout(je);je=setTimeout(function(){je=0},600)}}w("pointerUp");if(Ei(e,false)){e.preventDefault()}var i;if(W){var t=h.arraySearch(Be,e.pointerId,"id");if(t>-1){i=Be.splice(t,1)[0];if(navigator.pointerEnabled){i.type=e.pointerType||"mouse"}else{var n={4:"mouse",2:"touch",3:"pen"};i.type=n[e.pointerType];if(!i.type){i.type=e.pointerType||"mouse"}}}}var o=_i(e),r,a=o.length;if(e.type==="mouseup"){a=0}if(a===2){li=null;return true}if(a===1){me(We,o[0])}if(a===0&&!vi&&!pi){if(!i){if(e.type==="mouseup"){i={x:e.pageX,y:e.pageY,type:"mouse"}}else if(e.changedTouches&&e.changedTouches[0]){i={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"}}}w("touchRelease",e,i)}var l=-1;if(a===0){ii=false;h.unbind(window,C,p);Di();if(si){l=0}else if(ei!==-1){l=ae()-ei}}ei=a===1?ae():-1;if(l!==-1&&l<150){r="zoom"}else{r="swipe"}if(si&&a<2){si=false;if(a===1){r="zoomPointerUp"}w("zoomGestureEnded")}li=null;if(!oi&&!ni&&!pi&&!$e){return}Re();if(!Xe){Xe=Bi()}Xe.calculateSwipeSpeed("x");if($e){var u=Zi();if(u<m.verticalDragRange){p.close()}else{var s=y.y,f=gi;Ze("verticalDrag",0,1,300,h.easing.cubic.out,function(e){y.y=(p.currItem.initialPosition.y-s)*e+s;le((1-f)*e+f);fe()});w("onVerticalDrag",1)}return}if((ai||pi)&&a===0){var c=Xi(r,Xe);if(c){return}r="zoomPointerUp"}if(pi){return}if(r!=="swipe"){Ki();return}if(!ai&&x>p.currItem.fitRatio){Gi(Xe)}},Bi=function(){var i,t;var n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(e){if(Ve.length>1){i=ae()-_e+50;t=Ve[Ve.length-2][e]}else{i=ae()-ze;t=We[e]}n.lastFlickOffset[e]=Ye[e]-t;n.lastFlickDist[e]=Math.abs(n.lastFlickOffset[e]);if(n.lastFlickDist[e]>20){n.lastFlickSpeed[e]=n.lastFlickOffset[e]/i}else{n.lastFlickSpeed[e]=0}if(Math.abs(n.lastFlickSpeed[e])<.1){n.lastFlickSpeed[e]=0}n.slowDownRatio[e]=.95;n.slowDownRatioReverse[e]=1-n.slowDownRatio[e];n.speedDecelerationRatio[e]=1},calculateOverBoundsAnimOffset:function(i,e){if(!n.backAnimStarted[i]){if(y[i]>c.min[i]){n.backAnimDestination[i]=c.min[i]}else if(y[i]<c.max[i]){n.backAnimDestination[i]=c.max[i]}if(n.backAnimDestination[i]!==undefined){n.slowDownRatio[i]=.7;n.slowDownRatioReverse[i]=1-n.slowDownRatio[i];if(n.speedDecelerationRatioAbs[i]<.05){n.lastFlickSpeed[i]=0;n.backAnimStarted[i]=true;Ze("bounceZoomPan"+i,y[i],n.backAnimDestination[i],e||300,h.easing.sine.out,function(e){y[i]=e;fe()})}}}},calculateAnimOffset:function(e){if(!n.backAnimStarted[e]){n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10);n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]);n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff;y[e]+=n.distanceOffset[e]}},panAnimLoop:function(){if(Ae.zoomPan){Ae.zoomPan.raf=V(n.panAnimLoop);n.now=ae();n.timeDiff=n.now-n.lastNow;n.lastNow=n.now;n.calculateAnimOffset("x");n.calculateAnimOffset("y");fe();n.calculateOverBoundsAnimOffset("x");n.calculateOverBoundsAnimOffset("y");if(n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05){y.x=Math.round(y.x);y.y=Math.round(y.y);fe();Oe("zoomPan");return}}}};return n},Gi=function(e){e.calculateSwipeSpeed("y");c=p.currItem.bounds;e.backAnimDestination={};e.backAnimStarted={};if(Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05){e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0;e.calculateOverBoundsAnimOffset("x");e.calculateOverBoundsAnimOffset("y");return true}ke("zoomPan");e.lastNow=ae();e.panAnimLoop()},Xi=function(e,i){var t;if(!pi){Je=v}var n;if(e==="swipe"){var o=Ye.x-We.x,r=i.lastFlickDist.x<10;if(o>Fe&&(r||i.lastFlickOffset.x>20)){n=-1}else if(o<-Fe&&(r||i.lastFlickOffset.x<-20)){n=1}}var a;if(n){v+=n;if(v<0){v=m.loop?ot()-1:0;a=true}else if(v>=ot()){v=m.loop?0:ot()-1;a=true}if(!a||m.loop){z+=n;R-=n;t=true}}var l=P.x*R;var s=Math.abs(l-ci.x);var f;if(!t&&l>ci.x!==i.lastFlickSpeed.x>0){f=333}else{f=Math.abs(i.lastFlickSpeed.x)>0?s/Math.abs(i.lastFlickSpeed.x):333;f=Math.min(f,400);f=Math.max(f,250)}if(Je===v){t=false}pi=true;w("mainScrollAnimStart");Ze("mainScroll",ci.x,l,f,h.easing.cubic.out,de,function(){Re();pi=false;Je=-1;if(t||Je!==v){p.updateCurrItem()}w("mainScrollAnimComplete")});if(t){p.updateCurrItem(true)}return t},Vi=function(e){return 1/ui*e*S},Ki=function(){var e=x,i=be(),t=Ie();if(x<i){e=i}else if(x>t){e=t}var n=1,o,r=gi;if(xi&&!qe&&!wi&&x<i){p.close();return true}if(xi){o=function(e){le((n-r)*e+r)}}p.zoomTo(e,0,200,h.easing.cubic.out,o);return true};te("Gestures",{publicMethods:{initGestures:function(){var e=function(e,i,t,n,o){_=e+i;N=e+t;U=e+n;if(o){H=e+o}else{H=""}};W=g.pointerEvent;if(W&&g.touch){g.touch=false}if(W){if(navigator.pointerEnabled){e("pointer","down","move","up","cancel")}else{e("MSPointer","Down","Move","Up","Cancel")}}else if(g.touch){e("touch","start","move","end","cancel");G=true}else{e("mouse","down","move","up")}C=N+" "+U+" "+H;D=_;if(W&&!G){G=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1}p.likelyTouchDevice=G;T[_]=Ui;T[N]=Hi;T[U]=Wi;if(H){T[H]=T[U]}if(g.touch){D+=" mousedown";C+=" mousemove mouseup";T.mousedown=T[_];T.mousemove=T[N];T.mouseup=T[U]}if(!G){m.allowPanToNext=false}}}});var qi,$i=function(l,e,s,i){if(qi){clearTimeout(qi)}it=true;et=true;var f;if(l.initialLayout){f=l.initialLayout;l.initialLayout=null}else{f=m.getThumbBoundsFn&&m.getThumbBoundsFn(v)}var u=s?m.hideAnimationDuration:m.showAnimationDuration;var c=function(){Oe("initialZoom");if(!s){le(1);if(e){e.style.display="block"}h.addClass(d,"pswp--animated-in");w("initialZoom"+(s?"OutEnd":"InEnd"))}else{p.template.removeAttribute("style");p.bg.removeAttribute("style")}if(i){i()}it=false};if(!u||!f||f.x===undefined){w("initialZoom"+(s?"Out":"In"));x=l.initialZoomLevel;me(y,l.initialPosition);fe();d.style.opacity=s?0:1;le(1);if(u){setTimeout(function(){c()},u)}else{c()}return}var t=function(){var r=b,a=!p.currItem.src||p.currItem.loadError||m.showHideOpacity;if(l.miniImg){l.miniImg.style.webkitBackfaceVisibility="hidden"}if(!s){x=f.w/l.w;y.x=f.x;y.y=f.y-$;p[a?"template":"bg"].style.opacity=.001;fe()}ke("initialZoom");if(s&&!r){h.removeClass(d,"pswp--animated-in")}if(a){if(s){h[(r?"remove":"add")+"Class"](d,"pswp--animate_opacity")}else{setTimeout(function(){h.addClass(d,"pswp--animate_opacity")},30)}}qi=setTimeout(function(){w("initialZoom"+(s?"Out":"In"));if(!s){x=l.initialZoomLevel;me(y,l.initialPosition);fe();le(1);if(a){d.style.opacity=1}else{le(1)}qi=setTimeout(c,u+20)}else{var i=f.w/l.w,t={x:y.x,y:y.y},n=x,o=gi,e=function(e){if(e===1){x=i;y.x=f.x;y.y=f.y-J}else{x=(i-n)*e+n;y.x=(f.x-t.x)*e+t.x;y.y=(f.y-J-t.y)*e+t.y}fe();if(a){d.style.opacity=1-e}else{le(o-e*o)}};if(r){Ze("initialZoom",0,1,u,h.easing.cubic.out,e,c)}else{e(1);qi=setTimeout(c,u+20)}}},s?25:90)};t()};var ji,Ji={},Qi=[],et,it,tt={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:false,preload:[1,1],getNumItemsFn:function(){return ji.length}};var nt,ot,rt,at=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},lt=function(e,i,t){var n=e.bounds;n.center.x=Math.round((Ji.x-i)/2);n.center.y=Math.round((Ji.y-t)/2)+e.vGap.top;n.max.x=i>Ji.x?Math.round(Ji.x-i):n.center.x;n.max.y=t>Ji.y?Math.round(Ji.y-t)+e.vGap.top:n.center.y;n.min.x=i>Ji.x?0:n.center.x;n.min.y=t>Ji.y?e.vGap.top:n.center.y},st=function(e,i,t){if(e.src&&!e.loadError){var n=!t;if(n){if(!e.vGap){e.vGap={top:0,bottom:0}}w("parseVerticalMargin",e)}Ji.x=i.x;Ji.y=i.y-e.vGap.top-e.vGap.bottom;if(n){var o=Ji.x/e.w;var r=Ji.y/e.h;e.fitRatio=o<r?o:r;var a=m.scaleMode;if(a==="orig"){t=1}else if(a==="fit"){t=e.fitRatio}if(t>1){t=1}e.initialZoomLevel=t;if(!e.bounds){e.bounds=at()}}if(!t){return}lt(e,e.w*t,e.h*t);if(n&&t===e.initialZoomLevel){e.initialPosition=e.bounds.center}return e.bounds}else{e.w=e.h=0;e.initialZoomLevel=e.fitRatio=1;e.bounds=at();e.initialPosition=e.bounds.center;return e.bounds}},ft=function(e,i,t,n,o,r){if(i.loadError){return}if(n){i.imageAppended=true;dt(i,n,i===p.currItem&&ee);t.appendChild(n);if(r){setTimeout(function(){if(i&&i.loaded&&i.placeholder){i.placeholder.style.display="none";i.placeholder=null}},500)}}},ut=function(e){e.loading=true;e.loaded=false;var i=e.img=h.createEl("pswp__img","img");var t=function(){e.loading=false;e.loaded=true;if(e.loadComplete){e.loadComplete(e)}else{e.img=null}i.onload=i.onerror=null;i=null};i.onload=t;i.onerror=function(){e.loadError=true;t()};i.src=e.src;return i},ct=function(e,i){if(e.src&&e.loadError&&e.container){if(i){e.container.innerHTML=""}e.container.innerHTML=m.errorMsg.replace("%url%",e.src);return true}},dt=function(e,i,t){if(!e.src){return}if(!i){i=e.container.lastChild}var n=t?e.w:Math.round(e.w*e.fitRatio),o=t?e.h:Math.round(e.h*e.fitRatio);if(e.placeholder&&!e.loaded){e.placeholder.style.width=n+"px";e.placeholder.style.height=o+"px"}i.style.width=n+"px";i.style.height=o+"px"},pt=function(){if(Qi.length){var e;for(var i=0;i<Qi.length;i++){e=Qi[i];if(e.holder.index===e.index){ft(e.index,e.item,e.baseDiv,e.img,false,e.clearPlaceholder)}}Qi=[]}};te("Controller",{publicMethods:{lazyLoadItem:function(e){e=ne(e);var i=nt(e);if(!i||(i.loaded||i.loading)&&!k){return}w("gettingData",e,i);if(!i.src){return}ut(i)},initController:function(){h.extend(m,tt,true);p.items=ji=e;nt=p.getItemAt;ot=m.getNumItemsFn;rt=m.loop;if(ot()<3){m.loop=false}re("beforeChange",function(e){var i=m.preload,t=e===null?true:e>=0,n=Math.min(i[0],ot()),o=Math.min(i[1],ot()),r;for(r=1;r<=(t?o:n);r++){p.lazyLoadItem(v+r)}for(r=1;r<=(t?n:o);r++){p.lazyLoadItem(v-r)}});re("initialLayout",function(){p.currItem.initialLayout=m.getThumbBoundsFn&&m.getThumbBoundsFn(v)});re("mainScrollAnimComplete",pt);re("initialZoomInEnd",pt);re("destroy",function(){var e;for(var i=0;i<ji.length;i++){e=ji[i];if(e.container){e.container=null}if(e.placeholder){e.placeholder=null}if(e.img){e.img=null}if(e.preloader){e.preloader=null}if(e.loadError){e.loaded=e.loadError=false}}Qi=null})},getItemAt:function(e){if(e>=0){return ji[e]!==undefined?ji[e]:false}return false},allowProgressiveImg:function(){return m.forceProgressiveLoading||!G||m.mouseUsed||screen.width>1200},setContent:function(i,t){if(m.loop){t=ne(t)}var e=p.getItemAt(i.index);if(e){e.container=null}var n=p.getItemAt(t),o;if(!n){i.el.innerHTML="";return}w("gettingData",t,n);i.index=t;i.item=n;var r=n.container=h.createEl("pswp__zoom-wrap");if(!n.src&&n.html){if(n.html.tagName){r.appendChild(n.html)}else{r.innerHTML=n.html}}ct(n);st(n,M);if(n.src&&!n.loadError&&!n.loaded){n.loadComplete=function(e){if(!s){return}if(i&&i.index===t){if(ct(e,true)){e.loadComplete=e.img=null;st(e,M);ue(e);if(i.index===v){p.updateCurrZoomItem()}return}if(!e.imageAppended){if(g.transform&&(pi||it)){Qi.push({item:e,baseDiv:r,img:e.img,index:t,holder:i,clearPlaceholder:true})}else{ft(t,e,r,e.img,pi||it,true)}}else{if(!it&&e.placeholder){e.placeholder.style.display="none";e.placeholder=null}}}e.loadComplete=null;e.img=null;w("imageLoadComplete",t,e)};if(h.features.transform){var a="pswp__img pswp__img--placeholder";a+=n.msrc?"":" pswp__img--placeholder--blank";var l=h.createEl(a,n.msrc?"img":"");if(n.msrc){l.src=n.msrc}dt(n,l);r.appendChild(l);n.placeholder=l}if(!n.loading){ut(n)}if(p.allowProgressiveImg()){if(!et&&g.transform){Qi.push({item:n,baseDiv:r,img:n.img,index:t,holder:i})}else{ft(t,n,r,n.img,true,true)}}}else if(n.src&&!n.loadError){o=h.createEl("pswp__img","img");o.style.opacity=1;o.src=n.src;dt(n,o);ft(t,n,r,o,true)}if(!et&&t===v){di=r.style;$i(n,o||n.img)}else{ue(n)}i.el.innerHTML="";i.el.appendChild(r)},cleanSlide:function(e){if(e.img){e.img.onload=e.img.onerror=null}e.loaded=e.loading=e.img=e.imageAppended=false}}});var mt,ht={},vt=function(e,i,t){var n=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:i,pointerType:t||"touch"};n.initCustomEvent("pswpTap",true,true,o);e.target.dispatchEvent(n)};te("Tap",{publicMethods:{initTap:function(){re("firstTouchStart",p.onTapStart);re("touchRelease",p.onTapRelease);re("destroy",function(){ht={};mt=null})},onTapStart:function(e){if(e.length>1){clearTimeout(mt);mt=null}},onTapRelease:function(e,i){if(!i){return}if(!oi&&!ti&&!Ee){var t=i;if(mt){clearTimeout(mt);mt=null;if(Ii(t,ht)){w("doubleTap",t);return}}if(i.type==="mouse"){vt(e,i,"mouse");return}var n=e.target.tagName.toUpperCase();if(n==="BUTTON"||h.hasClass(e.target,"pswp__single-tap")){vt(e,i);return}me(ht,t);mt=setTimeout(function(){vt(e,i);mt=null},300)}}}});var yt;te("DesktopZoom",{publicMethods:{initDesktopZoom:function(){if(j){return}if(G){re("mouseUsed",function(){p.setupDesktopZoom()})}else{p.setupDesktopZoom(true)}},setupDesktopZoom:function(e){yt={};var i="wheel mousewheel DOMMouseScroll";re("bindEvents",function(){h.bind(d,i,p.handleMouseWheel)});re("unbindEvents",function(){if(yt){h.unbind(d,i,p.handleMouseWheel)}});p.mouseZoomedIn=false;var t,n=function(){if(p.mouseZoomedIn){h.removeClass(d,"pswp--zoomed-in");p.mouseZoomedIn=false}if(x<1){h.addClass(d,"pswp--zoom-allowed")}else{h.removeClass(d,"pswp--zoom-allowed")}o()},o=function(){if(t){h.removeClass(d,"pswp--dragging");t=false}};re("resize",n);re("afterChange",n);re("pointerDown",function(){if(p.mouseZoomedIn){t=true;h.addClass(d,"pswp--dragging")}});re("pointerUp",o);if(!e){n()}},handleMouseWheel:function(e){if(x<=p.currItem.fitRatio){if(m.modal){if(!m.closeOnScroll||Ee||ii){e.preventDefault()}else if(Y&&Math.abs(e.deltaY)>2){b=true;p.close()}}return true}e.stopPropagation();yt.x=0;if("deltaX"in e){if(e.deltaMode===1){yt.x=e.deltaX*18;yt.y=e.deltaY*18}else{yt.x=e.deltaX;yt.y=e.deltaY}}else if("wheelDelta"in e){if(e.wheelDeltaX){yt.x=-.16*e.wheelDeltaX}if(e.wheelDeltaY){yt.y=-.16*e.wheelDeltaY}else{yt.y=-.16*e.wheelDelta}}else if("detail"in e){yt.y=e.detail}else{return}we(x,true);var i=y.x-yt.x,t=y.y-yt.y;if(m.modal||i<=c.min.x&&i>=c.max.x&&t<=c.min.y&&t>=c.max.y){e.preventDefault()}p.panTo(i,t)},toggleDesktopZoom:function(e){e=e||{x:M.x/2+Z.x,y:M.y/2+Z.y};var i=m.getDoubleTapZoom(true,p.currItem);var t=x===i;p.mouseZoomedIn=!t;p.zoomTo(t?p.currItem.initialZoomLevel:i,e,333);h[(!t?"add":"remove")+"Class"](d,"pswp--zoomed-in")}}});var xt={history:true,galleryUID:1};var gt,wt,bt,It,Ct,Dt,Tt,Mt,St,At,Et,Ot,kt=function(){return Et.hash.substring(1)},Rt=function(){if(gt){clearTimeout(gt)}if(bt){clearTimeout(bt)}},Zt=function(){var e=kt(),i={};if(e.length<5){return i}var t,n=e.split("&");for(t=0;t<n.length;t++){if(!n[t]){continue}var o=n[t].split("=");if(o.length<2){continue}i[o[0]]=o[1]}if(m.galleryPIDs){var r=i.pid;i.pid=0;for(t=0;t<ji.length;t++){if(ji[t].pid===r){i.pid=t;break}}}else{i.pid=parseInt(i.pid,10)-1}if(i.pid<0){i.pid=0}return i},Pt=function(){if(bt){clearTimeout(bt)}if(Ee||ii){bt=setTimeout(Pt,500);return}if(It){clearTimeout(wt)}else{It=true}var e=v+1;var i=nt(v);if(i.hasOwnProperty("pid")){e=i.pid}var t=Tt+"&"+"gid="+m.galleryUID+"&"+"pid="+e;if(!Mt){if(Et.hash.indexOf(t)===-1){At=true}}var n=Et.href.split("#")[0]+"#"+t;if(Ot){if("#"+t!==window.location.hash){history[Mt?"replaceState":"pushState"]("",document.title,n)}}else{if(Mt){Et.replace(n)}else{Et.hash=t}}Mt=true;wt=setTimeout(function(){It=false},60)};te("History",{publicMethods:{initHistory:function(){h.extend(m,xt,true);if(!m.history){return}Et=window.location;At=false;St=false;Mt=false;Tt=kt();Ot="pushState"in history;if(Tt.indexOf("gid=")>-1){Tt=Tt.split("&gid=")[0];Tt=Tt.split("?gid=")[0]}re("afterChange",p.updateURL);re("unbindEvents",function(){h.unbind(window,"hashchange",p.onHashChange)});var e=function(){Dt=true;if(!St){if(At){history.back()}else{if(Tt){Et.hash=Tt}else{if(Ot){history.pushState("",document.title,Et.pathname+Et.search)}else{Et.hash=""}}}}Rt()};re("unbindEvents",function(){if(b){e()}});re("destroy",function(){if(!Dt){e()}});re("firstUpdate",function(){v=Zt().pid});var i=Tt.indexOf("pid=");if(i>-1){Tt=Tt.substring(0,i);if(Tt.slice(-1)==="&"){Tt=Tt.slice(0,-1)}}setTimeout(function(){if(s){h.bind(window,"hashchange",p.onHashChange)}},40)},onHashChange:function(){if(kt()===Tt){St=true;p.close();return}if(!It){Ct=true;p.goTo(Zt().pid);Ct=false}},updateURL:function(){Rt();if(Ct){return}if(!Mt){Pt()}else{gt=setTimeout(Pt,800)}}}});h.extend(p,Pe)};return e});